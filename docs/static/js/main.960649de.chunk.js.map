{"version":3,"sources":["MemberForm.js","KRad.js","App.js","index.js"],"names":["MemberForm","members","onMemberAdd","onMemberRemove","onMemberChange","React","useState","inputText","setInputText","activeIndex","setActiveIndex","activeInputRef","useRef","onChange","useCallback","e","target","selectionStart","setTimeout","current","focus","setSelectionRange","value","dataset","index","onKeyPress","charCode","onRemoveClick","className","map","item","onClick","ref","data-index","placeholder","KRad","useEffect","canvas","fabric","StaticCanvas","width","height","length","COLOR_STACK","CANVAS_HALF_WIDTH","CANVAS_WIDTH","PIE_RADIUS","FULL_CIRCLE","Math","PI","nextX","cos","nextY","sin","ANGLE_INCREMENT","forEach","member","i","pie","Path","fill","opacity","angle","objectOrigin","Point","left","top","newOrigin","util","rotatePoint","degreesToRadians","x","y","rotate","add","text","Text","originX","originY","dispose","rotation","setRotation","setClassName","style","transform","random","onTransitionEnd","id","PUBLIC_URL","process","App","match","window","location","search","restoredMembers","atob","split","setMembers","history","replaceState","onShareClick","membersStr","btoa","join","url","navigator","clipboard","writeText","updated","splice","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yQAEe,SAASA,EAAT,GAA+E,IAAzDC,EAAwD,EAAxDA,QAASC,EAA+C,EAA/CA,YAAaC,EAAkC,EAAlCA,eAAgBC,EAAkB,EAAlBA,eAAkB,EACzDC,IAAMC,SAAS,IAD0C,mBACpFC,EADoF,KACzEC,EADyE,OAErDH,IAAMC,SAAS,MAFsC,mBAEpFG,EAFoF,KAEvEC,EAFuE,KAGrFC,EAAiBN,IAAMO,SAEvBC,EAAWR,IAAMS,aAAY,SAACC,GAAO,IAClCC,EAAUD,EAAVC,OAEDC,EAAiBD,EAAOC,eAC9BC,YAAW,WACLP,EAAeQ,UACjBR,EAAeQ,QAAQC,QACvBT,EAAeQ,QAAQE,kBAAkBJ,EAAgBA,MAE1D,GAEHb,EAAeY,EAAOM,MAAON,EAAOO,QAAQC,UAGxCC,EAAapB,IAAMS,aAAY,SAACC,GACjB,KAAfA,EAAEW,WAINxB,EAAYa,EAAEC,OAAOM,OACrBd,EAAa,QAGTmB,EAAgBtB,IAAMS,aAAY,SAACC,GACvCZ,EAAeY,EAAEC,OAAOO,QAAQC,UAGlC,OACE,sBAAKI,UAAU,aAAf,UACG3B,EAAQ4B,KAAI,SAACC,EAAMN,GAAP,OACX,sBAAKI,UAAU,kBAAf,UACE,sBAAKA,UAAU,qBAAf,UACGJ,IAAUf,GACX,sBACEmB,UAAU,eACVG,QAAS,WACPrB,EAAec,GACfN,YAAW,WACLP,EAAeQ,SACjBR,EAAeQ,QAAQC,UAExB,IARP,SAUEU,IAEDN,IAAUf,GACX,uBACEuB,IAAKrB,EACLiB,UAAU,eACVN,MAAOQ,EACPG,aAAYT,EACZX,SAAUA,OAId,wBACEoB,aAAYT,EACZI,UAAU,4CACVG,QAASJ,EAHX,oBAzBoCG,MAkCxC,qBAAKF,UAAU,kBAAf,SACE,uBACEA,UAAU,eACVH,WAAYA,EACZZ,SAAU,SAACE,GAAD,OAAOP,EAAaO,EAAEC,OAAOM,QACvCY,YAAY,oBACZZ,MAAOf,S,WC7DF,SAAS4B,EAAT,GAAiC,IAAD,IAAhBlC,eAAgB,MAAN,GAAM,EAC7CI,IAAM+B,WAAU,WACd,IAAMC,EAAS,IAAIC,SAAOC,aAAa,IAAK,CAAEC,MAAO,IAAKC,OAAQ,MAElE,KAAIxC,EAAQyC,QAAU,GAAtB,CAGA,IAAMC,EAAc,CAClB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGIC,EAAoBC,IACpBC,EAAa,IACbC,EAAc,EAAIC,KAAKC,GACvBC,EACJN,EAAoBI,KAAKG,IAAIJ,EAAc9C,EAAQyC,QAAUI,EACzDM,EACJR,EAAoBI,KAAKK,IAAIN,EAAc9C,EAAQyC,QAAUI,EAEzDQ,EAAkBrD,EAAQyC,OAAS,EAAI,IAAQzC,EAAQyC,OAAS,EA4BtE,OA1BAzC,EAAQsD,SAAQ,SAACC,EAAQC,GACvB,IAAMC,EAAM,IAAIpB,SAAOqB,KAAX,sBAERf,IAFQ,kBAGAE,EAHA,aAGeA,EAHf,kBAGmCI,EAHnC,YAG4CE,EAH5C,MAIV,CACEQ,KAAMjB,EAAYc,EAAId,EAAYD,QAClCmB,QAAS,KAhDnB,SAAgBH,EAAKI,GACnB,IAAMC,EAAe,IAAIzB,SAAO0B,MAAMN,EAAIO,KAAMP,EAAIQ,KAC9CC,EAAY7B,SAAO8B,KAAKC,YAC5BN,EACA,IAAIzB,SAAO0B,MAAM,IAAK,KACtB1B,SAAO8B,KAAKE,iBAAiBR,IAG/BJ,EAAIO,KAAOE,EAAUI,EACrBb,EAAIQ,IAAMC,EAAUK,EACpBd,EAAII,MAAQA,EAyCRW,CAAOf,EAAYJ,EAAkB,EAAxB,IAA4BA,EAAkBG,GAC3DpB,EAAOqC,IAAIhB,MAGbzD,EAAQsD,SAAQ,SAACC,EAAQC,GACvB,IAAMkB,EAAO,IAAIrC,SAAOsC,KAAX,UAAmBpB,EAAnB,OAAgC,CAC3CI,KAAM,QACNiB,QAAS,QACTC,QAAS,SACThB,MAAOR,EAAkBG,EACzBQ,KAAMrB,EACNsB,IAAKtB,IAEPP,EAAOqC,IAAIC,MAGN,WACHtC,EAAO0C,cAEV,CAAC9E,IAzDyC,MA0DbI,IAAMC,SAAS,GA1DF,mBA0DtC0E,EA1DsC,KA0D5BC,EA1D4B,OA2DX5E,IAAMC,SAAS,IA3DJ,mBA2DtCsB,EA3DsC,KA2D3BsD,EA3D2B,KA6D7C,OACE,qCACE,qBAAKtD,UAAU,kBAAf,kCAGA,wBACEuD,MAAO,CAAEC,UAAU,UAAD,OAAYJ,EAAZ,SAClBjD,QAAS,WACPmD,EAAa,aACbD,EAAYD,EAA2B,IAAhBhC,KAAKqC,SAAiB,IAE/CC,gBAAiB,WACfJ,EAAa,IACbD,EAAYD,EAAW,MAEzBO,GAAG,IACH3D,UAAWA,EACXY,MAAO,IACPC,OAAQ,SC1FhB,IAAM+C,EAAaC,2CAEJ,SAASC,IACtBrF,IAAM+B,WAAU,WACd,IAAMuD,EAAQC,OAAOC,SAASC,OAASF,OAAOC,SAASC,OAAOH,MAAM,UAAY,KAChF,GAAKA,EAAL,CAGA,IACMI,EADQC,KAAKL,EAAM,IACKM,MAAM,KAEpCC,EAAWH,GACXH,OAAOO,QAAQC,aAAa,KAAM,KAAMZ,EAAa,QACpD,IAXyB,MAaEnF,IAAMC,SAAS,CAAC,MAAO,WAAY,aAbrC,mBAarBL,EAbqB,KAaZiG,EAbY,KAetBG,EAAehG,IAAMS,aAAY,WACrC,IAAMwF,EAAaC,KAAKtG,EAAQuG,KAAK,MAE/BC,EAAG,UADOjB,2CACP,cAAmBc,GAC5BI,UAAUC,UAAUC,UAAUH,KAC7B,CAACxG,IAEJ,OACE,sBAAK2B,UAAU,YAAf,UACE,oBAAIA,UAAU,iBAAd,8BACA,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,qBAAf,SACE,wBAAQA,UAAU,yBAAyBG,QAASsE,EAApD,mCAGJ,sBAAKzE,UAAU,MAAf,UACE,qBAAKA,UAAU,oBAAf,SACE,cAAC5B,EAAD,CACEC,QAASA,EACTG,eAAgB,SAACoD,EAAQhC,GACvB,IAAMqF,EAAO,YAAO5G,GACpB4G,EAAQrF,GAASgC,EACjB0C,EAAWW,IAEb3G,YAAa,SAACsD,GACZ,IAAMqD,EAAO,sBAAO5G,GAAP,CAAgBuD,IAC7B0C,EAAWW,IAEb1G,eAAgB,SAACqB,GACf,IAAMqF,EAAO,YAAO5G,GACpB4G,EAAQC,OAAOtF,EAAO,GACtB0E,EAAWW,QAIjB,sBAAKjF,UAAU,QAAf,UACE,qBAAK2D,GAAG,UACR,cAACpD,EAAD,CAAMlC,QAASA,aCtDzB8G,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAACvB,EAAD,MAEFwB,SAASC,eAAe,W","file":"static/js/main.960649de.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function MemberForm({ members, onMemberAdd, onMemberRemove, onMemberChange }) {\n  const [inputText, setInputText] = React.useState('');\n  const [activeIndex, setActiveIndex] = React.useState(null);\n  const activeInputRef = React.useRef();\n  \n  const onChange = React.useCallback((e) => {\n    const {target} = e;\n\n    const selectionStart = target.selectionStart;\n    setTimeout(() => {\n      if (activeInputRef.current) {\n        activeInputRef.current.focus();\n        activeInputRef.current.setSelectionRange(selectionStart, selectionStart);\n      }\n    }, 0);\n\n    onMemberChange(target.value, target.dataset.index);\n  });\n\n  const onKeyPress = React.useCallback((e) => {\n    if (e.charCode !== 13) {\n      return;\n    }\n\n    onMemberAdd(e.target.value);\n    setInputText('');\n  });\n\n  const onRemoveClick = React.useCallback((e) => {\n    onMemberRemove(e.target.dataset.index);\n  });\n\n  return (\n    <div className=\"list-group\">\n      {members.map((item, index) => (\n        <div className=\"list-group-item\" key={item}>\n          <div className=\"list-group-control\">\n            {index !== activeIndex &&\n            <span\n              className=\"form-control\"\n              onClick={() => {\n                setActiveIndex(index);\n                setTimeout(() => {\n                  if (activeInputRef.current) {\n                    activeInputRef.current.focus();\n                  }\n                }, 0);\n              }}\n            >{item}</span>\n            }\n            {index === activeIndex &&\n            <input\n              ref={activeInputRef}\n              className=\"form-control\"\n              value={item}\n              data-index={index}\n              onChange={onChange}\n            />\n            }\n          </div>\n          <button\n            data-index={index}\n            className=\"btn btn-sm btn-secondary float-right mt-1\"\n            onClick={onRemoveClick}\n          >\n            &times;\n          </button>\n        </div>\n      ))}\n      <div className=\"list-group-item\">\n        <input\n          className=\"form-control\"\n          onKeyPress={onKeyPress}\n          onChange={(e) => setInputText(e.target.value)}\n          placeholder=\"Enter your member\"\n          value={inputText}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { fabric } from \"fabric\";\n\nfunction rotate(pie, angle) {\n  const objectOrigin = new fabric.Point(pie.left, pie.top);\n  const newOrigin = fabric.util.rotatePoint(\n    objectOrigin,\n    new fabric.Point(200, 200),\n    fabric.util.degreesToRadians(angle)\n  );\n\n  pie.left = newOrigin.x;\n  pie.top = newOrigin.y;\n  pie.angle = angle;\n}\n\nexport default function KRad({ members = [] }) {\n  React.useEffect(() => {\n    const canvas = new fabric.StaticCanvas(\"c\", { width: 400, height: 400 });\n\n    if (members.length <= 1) {\n      return;\n    }\n    const COLOR_STACK = [\n      \"#024873\",\n      \"#0FA697\",\n      \"#F2C53D\",\n      \"#BF814B\",\n      \"#591202\",\n      \"#1B91BF\",\n      \"#F2B035\",\n      \"#F2AB91\",\n    ];\n    const CANVAS_WIDTH = 400;\n    const CANVAS_HALF_WIDTH = CANVAS_WIDTH / 2;\n    const PIE_RADIUS = 195;\n    const FULL_CIRCLE = 2 * Math.PI;\n    const nextX =\n      CANVAS_HALF_WIDTH + Math.cos(FULL_CIRCLE / members.length) * PIE_RADIUS;\n    const nextY =\n      CANVAS_HALF_WIDTH - Math.sin(FULL_CIRCLE / members.length) * PIE_RADIUS;\n\n    const ANGLE_INCREMENT = members.length > 1 ? 360.0 / members.length : 0;\n    // PIES\n    members.forEach((member, i) => {\n      const pie = new fabric.Path(\n        `M 200,200 L ${\n          CANVAS_HALF_WIDTH + PIE_RADIUS\n        },200 A ${PIE_RADIUS}, ${PIE_RADIUS} 1,0,0 ${nextX},${nextY} Z`,\n        {\n          fill: COLOR_STACK[i % COLOR_STACK.length],\n          opacity: 1,\n        }\n      );\n      rotate(pie, -180 + ANGLE_INCREMENT / 2 + ANGLE_INCREMENT * i);\n      canvas.add(pie);\n    });\n    // TEXTS\n    members.forEach((member, i) => {\n      const text = new fabric.Text(`${member}   `, {\n        fill: \"white\",\n        originX: \"right\",\n        originY: \"center\",\n        angle: ANGLE_INCREMENT * i,\n        left: CANVAS_HALF_WIDTH,\n        top: CANVAS_HALF_WIDTH,\n      });\n      canvas.add(text);\n    });\n\n    return () => {\n        canvas.dispose();\n    };\n  }, [members]);\n  const [rotation, setRotation] = React.useState(0);\n  const [className, setClassName] = React.useState(\"\");\n\n  return (\n    <>\n      <div className=\"message-balloon\">\n        Touch me! for a spin\n      </div>\n      <canvas\n        style={{ transform: `rotate(${rotation}deg)` }}\n        onClick={() => {\n          setClassName(\"animating\");\n          setRotation(rotation + Math.random() * 360 * 5);\n        }}\n        onTransitionEnd={() => {\n          setClassName(\"\");\n          setRotation(rotation % 360);\n        }}\n        id=\"c\"\n        className={className}\n        width={400}\n        height={400}\n      ></canvas>\n    </>\n  );\n}\n","import React from 'react';\n\nimport MemberForm from './MemberForm';\nimport KRad from './KRad';\n\nconst PUBLIC_URL = process.env.PUBLIC_URL;\n\nexport default function App() {\n  React.useEffect(() => {\n    const match = window.location.search ? window.location.search.match(/d=(.+)/) : null;\n    if (!match) {\n      return;\n    }\n    const state = atob(match[1]);\n    const restoredMembers = state.split(',');\n\n    setMembers(restoredMembers);\n    window.history.replaceState(null, null, PUBLIC_URL + '/');\n  }, []);\n\n  const [members, setMembers] = React.useState(['Neo', 'Anderson', 'Morpheus']);\n  \n  const onShareClick = React.useCallback(() => {\n    const membersStr = btoa(members.join(','));\n    const baseUrl = PUBLIC_URL || `${window.location.protocol}//${window.location.host}`;\n    const url = `${baseUrl}?d=${membersStr}`;\n    navigator.clipboard.writeText(url);\n  }, [members]);\n  \n  return (\n    <div className=\"container\">\n      <h1 className=\"display-4 mb-5\">Kruschinskis Rad</h1>\n      <div className=\"row\">\n        <div className=\"col-2 offset-md-10\">\n          <button className=\"btn btn-sm btn-primary\" onClick={onShareClick}>Copy shared link!</button>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col-5 offset-md-1\">\n          <MemberForm\n            members={members} \n            onMemberChange={(member, index) => {\n              const updated = [...members];\n              updated[index] = member;\n              setMembers(updated);\n            }}\n            onMemberAdd={(member) => {\n              const updated = [...members, member];\n              setMembers(updated);\n            }}\n            onMemberRemove={(index) => {\n              const updated = [...members];\n              updated.splice(index, 1);\n              setMembers(updated);\n            }}\n          />\n        </div>\n        <div className=\"col-5\">\n          <div id=\"arrow\"></div>\n          <KRad members={members} />\n        </div>  \n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}