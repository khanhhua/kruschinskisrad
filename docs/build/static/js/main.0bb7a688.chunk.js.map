{"version":3,"sources":["MemberForm.js","KRad.js","App.js","index.js"],"names":["MemberForm","members","onMemberAdd","onMemberRemove","onMemberChange","React","useState","inputText","setInputText","onChange","useCallback","e","console","log","target","value","dataset","index","onKeyPress","charCode","onRemoveClick","className","map","item","data-index","onClick","placeholder","KRad","useEffect","canvas","fabric","StaticCanvas","width","height","length","COLOR_STACK","CANVAS_HALF_WIDTH","CANVAS_WIDTH","PIE_RADIUS","FULL_CIRCLE","Math","PI","nextX","cos","nextY","sin","ANGLE_INCREMENT","forEach","member","i","pie","Path","fill","opacity","angle","objectOrigin","Point","left","top","newOrigin","util","rotatePoint","degreesToRadians","x","y","rotate","add","text","Text","originX","originY","dispose","rotation","setRotation","setClassName","style","transform","random","onTransitionEnd","id","App","match","window","location","search","state","atob","restoredMembers","split","setMembers","history","replaceState","onShareClick","membersStr","btoa","join","url","protocol","host","navigator","clipboard","writeText","updated","splice","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0bb7a688.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function MemberForm({ members, onMemberAdd, onMemberRemove, onMemberChange }) {\n  const [inputText, setInputText] = React.useState('');\n  const onChange = React.useCallback((e) => {\n    console.log(`Inner: ${e.target.value} Index: ${e.target.dataset.index}`);\n    onMemberChange(e.target.value, e.target.dataset.index);\n  });\n\n  const onKeyPress = React.useCallback((e) => {\n    if (e.charCode !== 13) {\n      return;\n    }\n\n    onMemberAdd(e.target.value);\n    setInputText('');\n  });\n\n  const onRemoveClick = React.useCallback((e) => {\n    onMemberRemove(e.target.dataset.index);\n  });\n\n  return (\n    <div className=\"list-group\">\n      {members.map((item, index) => (\n        <div className=\"list-group-item\" key={item}>\n          <div className=\"list-group-control\">\n            <input\n              className=\"form-control\"\n              data-index={index}\n              onChange={onChange}\n              value={item}\n            />\n          </div>\n          <button\n            data-index={index}\n            className=\"btn btn-sm btn-secondary float-right mt-1\"\n            onClick={onRemoveClick}\n          >\n            &times;\n          </button>\n        </div>\n      ))}\n      <div className=\"list-group-item\">\n        <input\n          className=\"form-control\"\n          onKeyPress={onKeyPress}\n          onChange={(e) => setInputText(e.target.value)}\n          placeholder=\"Enter your member\"\n          value={inputText}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { fabric } from \"fabric\";\n\nfunction rotate(pie, angle) {\n  const objectOrigin = new fabric.Point(pie.left, pie.top);\n  const newOrigin = fabric.util.rotatePoint(\n    objectOrigin,\n    new fabric.Point(200, 200),\n    fabric.util.degreesToRadians(angle)\n  );\n\n  pie.left = newOrigin.x;\n  pie.top = newOrigin.y;\n  pie.angle = angle;\n}\n\nexport default function KRad({ members = [] }) {\n  React.useEffect(() => {\n    const canvas = new fabric.StaticCanvas(\"c\", { width: 400, height: 400 });\n\n    if (members.length <= 1) {\n      return;\n    }\n    const COLOR_STACK = [\n      \"#024873\",\n      \"#0FA697\",\n      \"#F2C53D\",\n      \"#BF814B\",\n      \"#591202\",\n      \"#1B91BF\",\n      \"#F2B035\",\n      \"#F2AB91\",\n    ];\n    const CANVAS_WIDTH = 400;\n    const CANVAS_HALF_WIDTH = CANVAS_WIDTH / 2;\n    const PIE_RADIUS = 195;\n    const FULL_CIRCLE = 2 * Math.PI;\n    const nextX =\n      CANVAS_HALF_WIDTH + Math.cos(FULL_CIRCLE / members.length) * PIE_RADIUS;\n    const nextY =\n      CANVAS_HALF_WIDTH - Math.sin(FULL_CIRCLE / members.length) * PIE_RADIUS;\n\n    const ANGLE_INCREMENT = members.length > 1 ? 360.0 / members.length : 0;\n    // PIES\n    members.forEach((member, i) => {\n      const pie = new fabric.Path(\n        `M 200,200 L ${\n          CANVAS_HALF_WIDTH + PIE_RADIUS\n        },200 A ${PIE_RADIUS}, ${PIE_RADIUS} 1,0,0 ${nextX},${nextY} Z`,\n        {\n          fill: COLOR_STACK[i],\n          opacity: 1,\n        }\n      );\n      rotate(pie, -180 + ANGLE_INCREMENT / 2 + ANGLE_INCREMENT * i);\n      canvas.add(pie);\n    });\n    // TEXTS\n    members.forEach((member, i) => {\n      const text = new fabric.Text(`${member}   `, {\n        fill: \"white\",\n        originX: \"right\",\n        originY: \"center\",\n        angle: ANGLE_INCREMENT * i,\n        left: CANVAS_HALF_WIDTH,\n        top: CANVAS_HALF_WIDTH,\n      });\n      canvas.add(text);\n    });\n\n    return () => {\n        canvas.dispose();\n    };\n  }, [members]);\n  const [rotation, setRotation] = React.useState(0);\n  const [className, setClassName] = React.useState(\"\");\n\n  return (\n    <>\n      <div className=\"message-balloon\">\n        Touch me! for a spin\n      </div>\n      <canvas\n        style={{ transform: `rotate(${rotation}deg)` }}\n        onClick={() => {\n          setClassName(\"animating\");\n          setRotation(rotation + Math.random() * 360 * 5);\n        }}\n        onTransitionEnd={() => {\n          setClassName(\"\");\n          setRotation(rotation % 360);\n        }}\n        id=\"c\"\n        className={className}\n        width={400}\n        height={400}\n      ></canvas>\n    </>\n  );\n}\n","import React from 'react';\n\nimport MemberForm from './MemberForm';\nimport KRad from './KRad';\n\nexport default function App() {\n  React.useEffect(() => {\n    const match = window.location.search ? window.location.search.match(/d=(.+)/) : null;\n    if (!match) {\n      return;\n    }\n    const state = atob(match[1]);\n    console.log({state});\n    const restoredMembers = state.split(',');\n    setMembers(restoredMembers);\n    window.history.replaceState(null, null, '/');\n  }, []);\n\n  const [members, setMembers] = React.useState(['Neo', 'Anderson', 'Morpheus']);\n  \n  const onShareClick = React.useCallback(() => {\n    const membersStr = btoa(members.join(','));\n    const url = `${window.location.protocol}//${window.location.host}?d=${membersStr}`;\n    navigator.clipboard.writeText(url);\n  }, [members]);\n  \n  return (\n    <div className=\"container\">\n      <h1 className=\"display-4 mb-5\">Kruschinskis Rad</h1>\n      <div className=\"row\">\n        <div className=\"col-2 offset-md-10\">\n          <button className=\"btn btn-sm btn-primary\" onClick={onShareClick}>Copy shared link!</button>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col-5 offset-md-1\">\n          <MemberForm\n            members={members} \n            onMemberChange={(member, index) => {\n              const updated = [...members];\n              updated[index] = member;\n              setMembers(updated);\n            }}\n            onMemberAdd={(member) => {\n              const updated = [...members, member];\n              setMembers(updated);\n            }}\n            onMemberRemove={(index) => {\n              const updated = [...members];\n              updated.splice(index, 1);\n              setMembers(updated);\n            }}\n          />\n        </div>\n        <div className=\"col-5\">\n          <div id=\"arrow\"></div>\n          <KRad members={members} />\n        </div>  \n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}